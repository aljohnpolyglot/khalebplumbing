// This script assumes Leaflet is already loaded in your HTML.
// Make sure you have:
// <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
// <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
// in your <head> or before </body>, *before* this script is loaded.

document.addEventListener('DOMContentLoaded', () => {
    const mapContainer = document.getElementById('mapid');

    if (mapContainer) {
        // Initialize Leaflet Map
        // Centered roughly on Central Luzon to include Bataan, Zambales, and Metro Manila
        // Zoom level 9 is a good starting point to see the general area
        const map = L.map('mapid').setView([14.8, 120.6], 9);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Define styles for service and non-service areas
        const defaultStyle = {
            fillColor: '#e0e0e0', // Light grey for non-service areas
            weight: 1,
            opacity: 1,
            color: 'white', // Border color
            fillOpacity: 0.7
        };

        const serviceAreaStyle = {
            fillColor: '#007BFF', // Primary blue for service areas
            weight: 2,
            opacity: 1,
            color: 'white', // Border color
            dashArray: '3', // Dashed border for extra emphasis
            fillOpacity: 0.7
        };

        const hoverStyle = {
            weight: 5,
            color: '#666', // Darker border on hover
            dashArray: '', // Solid border on hover
            fillOpacity: 0.9
        };

        // Function to determine the style of each GeoJSON feature
        function featureStyle(feature) {
            const provinceName = feature.properties.PROVINCE;
            const regionName = feature.properties.REGION; // Used for Metro Manila
        
            // Check if the municipality is within a serviced province/region
            if (provinceName === 'Bataan' || provinceName === 'Zambales' || regionName === 'Metropolitan Manila' || provinceName === 'Pampanga') {
                return serviceAreaStyle; // This will now apply to Pampanga
            }
            return defaultStyle;
        }

        // Function to handle interactions for each GeoJSON feature
        function onEachFeature(feature, layer) {
            let popupContent = '';
            if (feature.properties) {
                const name = feature.properties.NAME_2 || feature.properties.NAME_1; // Get municipality name, fallback to province/region name
                const province = feature.properties.PROVINCE || feature.properties.NAME_1; // Get province name
                const region = feature.properties.REGION;

                const isServiceArea = (province === 'Bataan' || province === 'Zambales' || region === 'Metropolitan Manila' || province === 'Pampanga');

                let serviceStatus = isServiceArea ? '<span style="color:#007BFF; font-weight:bold;">Service Area</span>' : 'Not a primary service area';
                if (province === 'Metropolitan Manila') { // Adjust for how Metro Manila municipalities are structured
                    // For Metro Manila, NAME_2 is the city name (e.g., "Manila", "Quezon City")
                    serviceStatus = '<span style="color:#007BFF; font-weight:bold;">Service Area (Metro Manila)</span>';
                }

                popupContent = `
                    <h4>${name}</h4>
                    <p><strong>Status:</strong> ${serviceStatus}</p>
                    <p>We offer fast, affordable, and expert plumbing solutions here. Call us for: septic tank siphoning, clogged drain/toilet repair, leak detection, and general plumbing services.</p>
                    <a href="tel:09272218560" class="popup-cta-button">Call Now: 0927 221 8560</a>
                `;
            }

            if (popupContent) {
                layer.bindPopup(popupContent);
            }

            layer.on({
                mouseover: function(e) {
                    const currentLayer = e.target;
                    currentLayer.setStyle(hoverStyle); // Apply hover style to make it stand out
                    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                        currentLayer.bringToFront(); // Bring hovered layer to front
                    }
                },
                mouseout: function(e) {
                    // Reset to original style when mouse leaves
                    e.target.setStyle(featureStyle(e.target.feature));
                },
                click: function(e) {
                    // Zoom to the clicked feature's bounds
                    map.fitBounds(e.target.getBounds());
                }
            });
        }

        // --- Provided MuniCities GeoJSON Data ---
        // In a real application, you might fetch this from a separate .json file:
        // fetch('path/to/MuniCities.json').then(response => response.json()).then(data => { ... });
        const muniCitiesTopoJSON = {
            "type": "FeatureCollection",
            "name": "MuniCities",
            "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
            "features": [
              {"type":"Topology","objects":{"municities-province-47-metropolitanmanila.0.001":{"type":"GeometryCollection","geometries":[{"type":"MultiPolygon","arcs":[[[0,1,2,3,4]],[[5,6,7]]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":950,"NAME_2":"Kalookan City","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[8,9,10]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":951,"NAME_2":"Las Piñas","NL_NAME_2":null,"VARNAME_2":"Las Piñas, City of","TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[11,12,13,14,15,16]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":952,"NAME_2":"Makati City","NL_NAME_2":null,"VARNAME_2":"Makati, City of","TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[17,-4,18,19]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":953,"NAME_2":"Malabon","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[20,-17,21,22,23]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":954,"NAME_2":"Mandaluyong","NL_NAME_2":null,"VARNAME_2":"Mandaluyong, City of","TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[24,25,-22,-16,26,27,28,-2]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":955,"NAME_2":"Manila","NL_NAME_2":null,"VARNAME_2":"City of Manila|Manila, City of","TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[29,30,31]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":956,"NAME_2":"Marikina","NL_NAME_2":null,"VARNAME_2":"Marikina, City of","TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[32,-9,33,34]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":957,"NAME_2":"Muntinlupa","NL_NAME_2":null,"VARNAME_2":"Muntinlupa, City of","TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[-3,-29,35,-19]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":958,"NAME_2":"Navotas","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[36,-34,-11,37,38]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":959,"NAME_2":"Parañaque","NL_NAME_2":null,"VARNAME_2":"Parañaque, City of","TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[39,-27,-15,40,-39]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":960,"NAME_2":"Pasay City","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[41,42,43,-12,-21,44,-30]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":961,"NAME_2":"Pasig City","NL_NAME_2":null,"VARNAME_2":"Pasig, City of","TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[45,-13,-44]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":962,"NAME_2":"Pateros","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[-31,-45,-24,46,-25,-1,47,-6,48]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":963,"NAME_2":"Quezon City","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[-23,-26,-47]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":964,"NAME_2":"San Juan","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[49,-35,-37,-41,-14,-46,-43]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":965,"NAME_2":"Taguig","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}},{"type":"Polygon","arcs":[[-48,-5,-18,50,-7]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":47,"NAME_1":"Metropolitan Manila","ID_2":966,"NAME_2":"Valenzuela","NL_NAME_2":null,"VARNAME_2":"Valenzuela, City of","TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Metropolitan Manila","REGION":"Metropolitan Manila"}}]}},"arcs":[[[121.02490234375045,14.688370704650822],[120.98951721191429,14.63567066192627]],[[120.98951721191429,14.63567066192627],[120.9657821655278,14.634070396423397]],[[120.9657821655278,14.634070396423397],[120.9635467529298,14.658709526062012]],[[120.9635467529298,14.658709526062012],[120.99915313720749,14.683150291442985]],[[120.99915313720749,14.683150291442985],[121.02490234375045,14.688370704650822]],[[121.1042633056644,14.758120536804256],[121.05065155029342,14.73723030090332],[121.01937866210983,14.70582103729248]],[[121.01937866210983,14.70582103729248],[121.00338745117188,14.74216270446783]],[[121.00338745117188,14.74216270446783],[121.05526733398438,14.780090332031193],[121.1042633056644,14.758120536804256]],[[121.02363586425815,14.434960365295467],[121.01259613037132,14.381440162658805]],[[121.01259613037132,14.381440162658805],[120.96460723876964,14.465580940246639],[120.98097991943405,14.489543914794922]],[[120.98097991943405,14.489543914794922],[120.9813232421875,14.48944091796875],[120.98287963867188,14.488630294799805],[120.98426818847679,14.486800193786678],[120.98571014404297,14.485850334167424],[120.98616790771496,14.485740661621207],[120.98664855957054,14.486140251159895],[120.98731231689464,14.48605060577404],[120.98764038085938,14.48611068725586],[120.98802947998047,14.485900878906307],[120.98818969726562,14.485700607299918],[120.9883804321289,14.485500335693303],[120.98867797851597,14.484730720520133],[120.98900604248058,14.484470367431697],[120.98895263671875,14.4837398529055],[120.98899078369186,14.483221054077262],[120.9895629882817,14.483340263366813],[120.99002838134766,14.48362064361595],[120.99040222168003,14.48270034790039],[120.99120330810558,14.481590270996037],[120.99112701416027,14.481300354004134],[120.99089050292969,14.48103046417242],[120.99156951904297,14.480160713195914],[120.99061584472656,14.47960090637207],[120.99060821533203,14.479169845581112],[120.99088287353516,14.478770256042594],[120.99256896972679,14.478070259094181],[120.9928970336914,14.477450370788517],[120.99326324462925,14.477410316467228],[120.99359130859386,14.477300643921012],[120.99371337890648,14.477130889892578],[120.99398040771496,14.476930618286133],[120.99427795410179,14.476820945739746],[120.99463653564464,14.476930618286133],[120.99494934082054,14.476571083068904],[120.99526977539062,14.476290702819938],[120.99578094482433,14.476430892944336],[120.99626922607433,14.476161003112793],[120.996337890625,14.476041793823242],[120.99645996093761,14.475710868835563],[120.99652862548828,14.475370407104549],[120.99671936035156,14.474751472473372],[120.99723815917991,14.473860740661678],[120.99726867675815,14.473711013794002],[120.99751281738315,14.473450660705566],[121.02363586425815,14.434960365295467]],[[121.0444564819336,14.569640159607047],[121.06368255615246,14.55487060546875]],[[121.06368255615246,14.55487060546875],[121.06578063964855,14.538721084594727]],[[121.06578063964855,14.538721084594727],[121.02156066894554,14.532620429992619]],[[121.02156066894554,14.532620429992619],[120.9972534179692,14.563449859619254]],[[120.9972534179692,14.563449859619254],[121.01487731933616,14.581110954284725]],[[121.01487731933616,14.581110954284725],[121.0444564819336,14.569640159607047]],[[120.95783233642612,14.687470436096191],[120.95944976806652,14.67733097076416],[120.95958709716797,14.677021026611328],[120.95970153808594,14.676790237426758],[120.9600296020509,14.67643070220953],[120.99915313720749,14.683150291442985]],[[120.9635467529298,14.658709526062012],[120.92820739746139,14.702191352844181]],[[120.92820739746139,14.702191352844181],[120.95783233642612,14.687470436096191]],[[121.0575332641605,14.589120864868391],[121.0444564819336,14.569640159607047]],[[121.01487731933616,14.581110954284725],[121.02369689941406,14.595951080322266]],[[121.02369689941406,14.595951080322266],[121.05712127685558,14.601990699768066]],[[121.05712127685558,14.601990699768066],[121.0575332641605,14.589120864868391]],[[120.98951721191429,14.63567066192627],[121.0145263671875,14.604960441589412]],[[121.0145263671875,14.604960441589412],[121.02369689941406,14.595951080322266]],[[120.9972534179692,14.563449859619254],[120.99127960205124,14.562630653381461],[120.99141693115257,14.56218147277832],[120.98831176757812,14.561220169067383],[120.98613739013717,14.561200141906852],[120.98475646972656,14.564311027526855],[120.98443603515636,14.564940452575684]],[[120.98443603515636,14.564940452575684],[120.95670318603538,14.596350669860954],[120.96163177490234,14.633650779724178]],[[120.96163177490234,14.633650779724178],[120.9657821655278,14.634070396423397]],[[121.10311889648472,14.62120056152338],[121.0771102905278,14.618041038513411]],[[121.0771102905278,14.618041038513411],[121.1037826538086,14.675880432128963]],[[121.1037826538086,14.675880432128963],[121.12576293945324,14.643400192260799],[121.10311889648472,14.62120056152338]],[[121.05628204345703,14.467828750610408],[121.05413055419922,14.382910728454704],[121.01259613037132,14.381440162658805]],[[121.02363586425815,14.434960365295467],[121.03936767578136,14.443950653076172],[121.03986358642601,14.444069862365723],[121.03939056396507,14.447910308837834],[121.03938293457043,14.448210716247559],[121.03913116455078,14.448601722717228],[121.03903961181675,14.44868087768549],[121.03875732421875,14.44901084899908],[121.03885650634766,14.4492702484132],[121.03904724121094,14.450039863586369],[121.03977203369163,14.450250625610408],[121.04022216796886,14.450591087341365],[121.04136657714855,14.452130317687931],[121.04141235351562,14.452301025390682],[121.04139709472679,14.452630996704045],[121.04145812988293,14.452870368957633],[121.04258728027389,14.453960418701229],[121.04280090332043,14.454791069030762],[121.04390716552734,14.455850601196403],[121.04461669921909,14.469141006469954]],[[121.04461669921909,14.469141006469954],[121.05628204345703,14.467828750610408]],[[120.96163177490234,14.633650779724178],[120.91750335693371,14.691670417785758],[120.92820739746139,14.702191352844181]],[[121.03457641601608,14.507931709289778],[121.04461669921909,14.469141006469954]],[[120.98097991943405,14.489543914794922],[120.97860717773438,14.533550262451115]],[[120.97860717773438,14.533550262451115],[121.00083923339855,14.509210586547908],[121.03457641601608,14.507931709289778]],[[120.97860717773438,14.533550262451115],[120.98443603515636,14.564940452575684]],[[121.02156066894554,14.532620429992619],[121.03457641601608,14.507931709289778]],[[121.10311889648472,14.62120056152338],[121.1078567504884,14.58132076263422],[121.09561157226608,14.541588783264217]],[[121.09561157226608,14.541588783264217],[121.07847595214855,14.547860145568848]],[[121.07847595214855,14.547860145568848],[121.06368255615246,14.55487060546875]],[[121.0575332641605,14.589120864868391],[121.0771102905278,14.618041038513411]],[[121.07847595214855,14.547860145568848],[121.06578063964855,14.538721084594727]],[[121.05712127685558,14.601990699768066],[121.0145263671875,14.604960441589412]],[[121.02490234375045,14.688370704650822],[121.01937866210983,14.70582103729248]],[[121.1042633056644,14.758120536804256],[121.13124084472656,14.739773750305119],[121.1037826538086,14.675880432128963]],[[121.09561157226608,14.541588783264217],[121.06792449951172,14.509296417236442],[121.05628204345703,14.467828750610408]],[[120.95783233642612,14.687470436096191],[120.99295806884766,14.714911460876522],[121.00338745117188,14.74216270446783]]],"bbox":[120.91750335693371,14.381440162658805,121.13124084472656,14.780090332031193]},
        {"type":"Topology","objects":{"municities-province-79-zambales.0.001":{"type":"GeometryCollection","geometries":[{"type":"Polygon","arcs":[[0,1,2,3,4,5]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1562,"NAME_2":"Botolan","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[6,7,-3]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1563,"NAME_2":"Cabangan","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[8,9,10,11]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1564,"NAME_2":"Candelaria","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[12,13,14]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1565,"NAME_2":"Castillejos","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[15,-5,16,17]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1566,"NAME_2":"Iba","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[18,19,20,-9]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1567,"NAME_2":"Masinloc","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[21,22]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1568,"NAME_2":"Olongapo City","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-18,23,-20,24]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1569,"NAME_2":"Palauig","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[25,-14,26,27,28]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1570,"NAME_2":"San Antonio","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-2,29,30,31,-7]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1571,"NAME_2":"San Felipe","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[32,-15,-26,33,-30,-1,34]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1572,"NAME_2":"San Marcelino","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-34,-29,35,-31]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1573,"NAME_2":"San Narciso","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-11,36]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1574,"NAME_2":"Santa Cruz","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[37,-27,-13,-33,38,-22]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":79,"NAME_1":"Zambales","ID_2":1575,"NAME_2":"Subic","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Zambales","REGION":"Central Luzon (Region III)"}}]}},"arcs":[[[120.36602783203125,15.105879783630371],[120.22038269043014,15.10385990142828]],[[120.22038269043014,15.10385990142828],[120.2055435180664,15.112609863281307]],[[120.2055435180664,15.112609863281307],[120.12252044677746,15.254039764404354],[120.03083038330078,15.187729835510254]],[[120.03083038330078,15.187729835510254],[119.9993667602539,15.30924034118675]],[[119.9993667602539,15.30924034118675],[120.16323852539097,15.360549926757812]],[[120.16323852539097,15.360549926757812],[120.28540802001964,15.28927993774414],[120.36602783203125,15.105879783630371]],[[120.2055435180664,15.112609863281307],[120.05061340332043,15.107999801635799]],[[120.05061340332043,15.107999801635799],[120.03083038330078,15.187729835510254]],[[120.21530914306675,15.565420150756893],[119.91605377197288,15.592709541320914]],[[119.91605377197288,15.592709541320914],[119.93363952636719,15.68976974487316]],[[119.93363952636719,15.68976974487316],[120.2021713256836,15.699139595031852]],[[120.2021713256836,15.699139595031852],[120.21530914306675,15.565420150756893]],[[120.35807037353527,14.9827299118042],[120.13971710205112,14.89601039886486]],[[120.13971710205112,14.89601039886486],[120.15775299072266,14.949979782104435]],[[120.15775299072266,14.949979782104435],[120.35807037353527,14.9827299118042]],[[120.17268371582043,15.421190261840763],[120.16323852539097,15.360549926757812]],[[119.9993667602539,15.30924034118675],[119.93750000000011,15.390899658203182]],[[119.93750000000011,15.390899658203182],[120.17268371582043,15.421190261840763]],[[120.21530914306675,15.565420150756893],[120.04781341552734,15.482930183410645]],[[120.04781341552734,15.482930183410645],[119.94555664062534,15.479869842529354]],[[119.94555664062534,15.479869842529354],[119.91605377197288,15.592709541320914]],[[120.2419662475586,14.853469848632926],[120.30901336669922,14.936140060424862],[120.45136260986374,14.93743991851818]],[[120.45136260986374,14.93743991851818],[120.29657745361351,14.801300048828125],[120.2419662475586,14.853469848632926]],[[119.93750000000011,15.390899658203182],[119.94555664062534,15.479869842529354]],[[120.04781341552734,15.482930183410645],[120.17268371582043,15.421190261840763]],[[120.11641693115246,14.975130081176758],[120.15775299072266,14.949979782104435]],[[120.13971710205112,14.89601039886486],[120.14630126953125,14.808090209961051],[120.15157318115234,14.788889884948844],[120.16169738769543,14.76447010040306],[120.17015838623047,14.747949600219727]],[[120.17015838623047,14.747949600219727],[120.09497833251953,14.781270027160701],[120.06163024902344,14.966629981994743]],[[120.06163024902344,14.966629981994743],[120.11641693115246,14.975130081176758]],[[120.22038269043014,15.10385990142828],[120.18707275390659,15.041529655456543]],[[120.18707275390659,15.041529655456543],[120.05513763427734,15.038089752197266]],[[120.05513763427734,15.038089752197266],[120.05061340332043,15.107999801635799]],[[120.41972351074253,15.007659912109375],[120.35807037353527,14.9827299118042]],[[120.11641693115246,14.975130081176758],[120.18707275390659,15.041529655456543]],[[120.36602783203125,15.105879783630371],[120.41972351074253,15.007659912109375]],[[120.06163024902344,14.966629981994743],[120.05513763427734,15.038089752197266]],[[119.93363952636719,15.68976974487316],[119.92437744140659,15.806639671325684],[120.15820312500045,15.817230224609432],[120.2021713256836,15.699139595031852]],[[120.2419662475586,14.853469848632926],[120.17015838623047,14.747949600219727]],[[120.41972351074253,15.007659912109375],[120.45136260986374,14.93743991851818]]],"bbox":[119.91605377197288,14.747949600219727,120.45136260986374,15.817230224609432]},
    {"type":"Topology","objects":{"municities-province-60-pampanga.0.001":{"type":"GeometryCollection","geometries":[{"type":"Polygon","arcs":[[0,1,2,3,4]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1216,"NAME_2":"Angeles City","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[5,6,7,8]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1217,"NAME_2":"Apalit","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[9,10,11,12,13]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1218,"NAME_2":"Arayat","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[14,15,16,17,18,-2,19]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1219,"NAME_2":"Bacolor","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[20,21,-10,22]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1220,"NAME_2":"Candaba","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[23,24,25,26]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1221,"NAME_2":"Floridablanca","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[27,-17,28,29,30,31,-24,32]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1222,"NAME_2":"Guagua","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"MultiPolygon","arcs":[[[33,34]],[[35,36,-25,-32]]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1223,"NAME_2":"Lubao","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[37,38,-4,39,40]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1224,"NAME_2":"Mabalacat","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[41,42,43,-30,44,-7]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1225,"NAME_2":"Macabebe","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-13,45,-38,46]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1226,"NAME_2":"Magalang","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[47,48,-43]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1227,"NAME_2":"Masantol","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[49,50,51,52,-5,-39,-46,-12]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1228,"NAME_2":"Mexico","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-8,-45,-29,-16,53,54]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1229,"NAME_2":"Minalin","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-19,55,-33,-27,56,-40,-3]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1230,"NAME_2":"Porac","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[57,-20,-1,-53]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1231,"NAME_2":"San Fernando City","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Lungsod|Siyudad","ENGTYPE_2":"City","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-21,58,59,-51,60]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1232,"NAME_2":"San Luis","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-60,61,-9,-55,62,-52]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1233,"NAME_2":"San Simon","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-61,-50,-11,-22]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1234,"NAME_2":"Santa Ana","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-28,-56,-18]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1235,"NAME_2":"Santa Rita","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-54,-15,-58,-63]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1236,"NAME_2":"Santo Tomas","NL_NAME_2":null,"VARNAME_2":null,"TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}},{"type":"Polygon","arcs":[[-44,-49,63,-35,64,-36,-31]],"properties":{"ID_0":177,"ISO":"PHL","NAME_0":"Philippines","ID_1":60,"NAME_1":"Pampanga","ID_2":1237,"NAME_2":"Sasmuan","NL_NAME_2":null,"VARNAME_2":"Sexmoan","TYPE_2":"Bayan|Munisipyo","ENGTYPE_2":"Municipality","PROVINCE":"Pampanga","REGION":"Central Luzon (Region III)"}}]}},"arcs":[[[120.64275360107445,15.131669998168945],[120.62339019775402,15.116729736328068]],[[120.62339019775402,15.116729736328068],[120.61463928222702,15.109499931335563]],[[120.61463928222702,15.109499931335563],[120.4808273315432,15.135379791259766]],[[120.4808273315432,15.135379791259766],[120.6427383422855,15.171950340271053]],[[120.6427383422855,15.171950340271053],[120.64275360107445,15.131669998168945]],[[120.89002227783214,14.977149963378906],[120.74683380126987,14.9158296585083]],[[120.74683380126987,14.9158296585083],[120.73980712890625,14.940389633178825]],[[120.73980712890625,14.940389633178825],[120.77281951904331,14.975990295410156]],[[120.77281951904331,14.975990295410156],[120.89002227783214,14.977149963378906]],[[120.86852264404331,15.165029525756893],[120.8209686279298,15.137789726257267]],[[120.8209686279298,15.137789726257267],[120.73388671875,15.136750221252555]],[[120.73388671875,15.136750221252555],[120.68007659912143,15.18373966217041]],[[120.68007659912143,15.18373966217041],[120.76957702636753,15.254659652710018]],[[120.76957702636753,15.254659652710018],[120.86852264404331,15.165029525756893]],[[120.72622680664097,14.994529724121094],[120.71833038330078,14.987139701843262]],[[120.71833038330078,14.987139701843262],[120.68850708007824,14.965470314025993]],[[120.68850708007824,14.965470314025993],[120.6378402709961,14.992059707641602]],[[120.6378402709961,14.992059707641602],[120.60108184814476,15.036399841308707]],[[120.60108184814476,15.036399841308707],[120.61463928222702,15.109499931335563]],[[120.62339019775402,15.116729736328068],[120.72622680664097,14.994529724121094]],[[120.89781951904342,15.003620147705135],[120.8277816772461,15.067130088806152]],[[120.8277816772461,15.067130088806152],[120.8209686279298,15.137789726257267]],[[120.86852264404331,15.165029525756893],[120.95543670654308,15.218110084533748],[120.97068786621139,15.045780181884993],[120.89781951904342,15.003620147705135]],[[120.55579376220703,14.991990089416618],[120.5744400024414,14.968919754028434]],[[120.5744400024414,14.968919754028434],[120.50454711914074,14.8987197875976]],[[120.50454711914074,14.8987197875976],[120.4205093383789,14.991089820861816],[120.41523742675781,15.057799339294434]],[[120.41523742675781,15.057799339294434],[120.55579376220703,14.991990089416618]],[[120.58759307861328,15.00866985321045],[120.6378402709961,14.992059707641602]],[[120.68850708007824,14.965470314025993],[120.68540191650436,14.912309646606388]],[[120.68540191650436,14.912309646606388],[120.67739105224655,14.907870292663631]],[[120.67739105224655,14.907870292663631],[120.63284301757835,14.946430206298885]],[[120.63284301757835,14.946430206298885],[120.5744400024414,14.968919754028434]],[[120.55579376220703,14.991990089416618],[120.58759307861328,15.00866985321045]],[[120.62541198730469,14.805139541626147],[120.62449645996139,14.803839683532772],[120.62082672119163,14.79889965057373],[120.62315368652344,14.816490173339957]],[[120.62315368652344,14.816490173339957],[120.62541198730469,14.805139541626147]],[[120.63284301757835,14.946430206298885],[120.61827850341831,14.877880096435547],[120.61759948730469,14.873889923095703],[120.61898040771496,14.86824989318842],[120.61872863769554,14.864999771118107],[120.62068176269577,14.861940383911246],[120.62608337402412,14.853019714355696]],[[120.62608337402412,14.853019714355696],[120.62555694580078,14.844149589538802],[120.62444305419945,14.826809883117676],[120.50454711914074,14.8987197875976]],[[120.62964630126999,15.25946044921875],[120.65403747558594,15.182229995727539]],[[120.65403747558594,15.182229995727539],[120.6427383422855,15.171950340271053]],[[120.4808273315432,15.135379791259766],[120.36602783203125,15.105879783630371]],[[120.36602783203125,15.105879783630371],[120.43618774414085,15.198740005493278],[120.62964630126999,15.25946044921875]],[[120.74683380126987,14.9158296585083],[120.73036956787121,14.850159645080566]],[[120.73036956787121,14.850159645080566],[120.69965362548874,14.88142013549816],[120.69777679443371,14.880590438842773],[120.69522094726562,14.879360198974553],[120.68459320068371,14.880800247192496],[120.65325164794945,14.884499549865723]],[[120.65325164794945,14.884499549865723],[120.67739105224655,14.907870292663631]],[[120.68540191650436,14.912309646606388],[120.73980712890625,14.940389633178825]],[[120.68007659912143,15.18373966217041],[120.65403747558594,15.182229995727539]],[[120.62964630126999,15.25946044921875],[120.76957702636753,15.254659652710018]],[[120.73036956787121,14.850159645080566],[120.633056640625,14.796660423278752]],[[120.633056640625,14.796660423278752],[120.64708709716797,14.8131103515625],[120.64650726318393,14.817970275878963],[120.64559173583996,14.823180198669434],[120.64466857910179,14.828880310058707],[120.64436340332043,14.83263969421398],[120.64806365966797,14.838399887084904],[120.6513671875,14.841950416564941],[120.65889739990268,14.85130977630638],[120.65986633300781,14.855330467224178],[120.65921020507858,14.857000350952376],[120.65706634521507,14.859609603881836],[120.65661621093784,14.860409736633528],[120.65482330322311,14.862549781799316],[120.65287780761719,14.863320350646973],[120.65036010742199,14.863869667053223],[120.64901733398438,14.866049766540641],[120.65325164794945,14.884499549865723]],[[120.73388671875,15.136750221252555],[120.788818359375,15.056659698486555]],[[120.788818359375,15.056659698486555],[120.77294921875045,15.024399757385368]],[[120.77294921875045,15.024399757385368],[120.75359344482422,15.02423954010004]],[[120.75359344482422,15.02423954010004],[120.64275360107445,15.131669998168945]],[[120.71833038330078,14.987139701843262],[120.75775146484409,14.992349624633846]],[[120.75775146484409,14.992349624633846],[120.77281951904331,14.975990295410156]],[[120.60108184814476,15.036399841308707],[120.58759307861328,15.00866985321045]],[[120.41523742675781,15.057799339294434],[120.36602783203125,15.105879783630371]],[[120.75359344482422,15.02423954010004],[120.72622680664097,14.994529724121094]],[[120.89781951904342,15.003620147705135],[120.9021224975586,14.985879898071403]],[[120.9021224975586,14.985879898071403],[120.77294921875045,15.024399757385368]],[[120.788818359375,15.056659698486555],[120.8277816772461,15.067130088806152]],[[120.9021224975586,14.985879898071403],[120.89002227783214,14.977149963378906]],[[120.75775146484409,14.992349624633846],[120.75359344482422,15.02423954010004]],[[120.633056640625,14.796660423278752],[120.62541198730469,14.805139541626147]],[[120.62315368652344,14.816490173339957],[120.62548065185558,14.822139739990178],[120.62580871582031,14.826239585876635],[120.62713623046875,14.845080375671614],[120.62682342529308,14.8520898818972],[120.62608337402412,14.853019714355696]]],"bbox":[120.36602783203125,14.796660423278752,120.97068786621139,15.25946044921875]}]
            
        }; // End of MuniCities GeoJSON
        // End of provided MuniCities GeoJSON. Add more features if available.

        // Load GeoJSON data and add to map
        const muniCitiesGeoJSON = { type: "FeatureCollection", features: [] };

        // Loop through each "feature" in your original data (which are actually topologies)
        muniCitiesTopoJSON.features.forEach(topology => {
            // Get the name of the main object inside the topology, e.g., "municities-province-47-metropolitanmanila.0.001"
            const objectKey = Object.keys(topology.objects)[0];
            // Use the topojson library to perform the conversion
            const geojsonCollection = topojson.feature(topology, topology.objects[objectKey]);
            // Add the converted shapes to our final, clean GeoJSON object
            muniCitiesGeoJSON.features.push(...geojsonCollection.features);
        });
        // --- END OF NEW CODE ---


        // Load the NOW-CORRECT GeoJSON data and add to map
        const geoJsonLayer = L.geoJson(muniCitiesGeoJSON, {
            style: featureStyle,
            onEachFeature: onEachFeature
        }).addTo(map);

        // Optional: Fit map bounds to the GeoJSON data once loaded
        // This will adjust the zoom/center to show all loaded GeoJSON features
        map.fitBounds(geoJsonLayer.getBounds());
    }
});